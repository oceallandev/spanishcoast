<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account | Spanish Coast Properties</title>
    <meta name="description"
        content="Create an account to save favourites, collaborate as a partner agency, and manage visits and conversations with Spanish Coast Properties.">
    <meta name="robots" content="index,follow">
    <link rel="canonical" href="https://oceallandev.github.io/spanishcoast/account.html">

    <meta name="theme-color" content="#030712">
    <link rel="manifest" href="manifest.webmanifest?v=20260210u">
    <link rel="stylesheet" href="style.css?v=20260210u">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script defer src="config.js?v=20260210u"></script>
    <script defer src="supabase-init.js?v=20260210u"></script>
</head>

<body data-section="account">
    <div class="bg-mesh"></div>

    <header class="main-header glass sticky">
        <div class="header-inner">
            <div class="header-left">
                <div class="logo">
                    <a href="index.html" aria-label="Spanish Coast Properties Home">
                        <img src="assets/header-logo.png?v=2" alt="Spanish Coast Properties" class="main-logo"
                            id="main-logo-img" style="cursor: pointer;">
                    </a>
                </div>
                <div class="brand-info">
                    <span class="brand-name">Spanish Coast Properties</span>
                </div>
                <nav class="primary-nav" id="primary-nav" aria-label="Site sections">
                    <a class="nav-link" data-section="home" href="index.html">Home</a>
                    <a class="nav-link" data-section="properties" href="properties.html">Properties</a>
                    <a class="nav-link" data-section="businesses" href="businesses.html">Businesses</a>
                    <a class="nav-link" data-section="vehicles" href="vehicles.html">Vehicles</a>
                    <a class="nav-link" data-section="services" href="services.html">Services</a>
                </nav>
            </div>

            <div class="header-right">
                <button id="mobile-menu-btn" class="mobile-menu-btn" type="button" aria-expanded="false" aria-label="Menu">☰</button>
                <a class="header-cta" href="tel:+34624867866">Call</a>
            </div>
        </div>
    </header>

    <div id="mobile-menu-backdrop" class="mobile-menu-backdrop" aria-hidden="true"></div>
    <aside id="mobile-menu" class="mobile-menu" aria-hidden="true">
        <div class="mobile-menu-head">
            <div class="mobile-menu-title">Spanish Coast Properties</div>
            <button id="mobile-menu-close" class="mobile-menu-close" type="button">✕</button>
        </div>
        <nav class="mobile-menu-links" aria-label="Mobile menu">
            <a href="index.html">Home</a>
            <a href="properties.html">Properties</a>
            <a href="businesses.html">Businesses</a>
            <a href="vehicles.html">Vehicles</a>
            <a href="services.html">Services</a>
            <a href="account.html">Account</a>
        </nav>
        <div class="mobile-menu-foot">
            <a class="cta-button" href="mailto:info@spanishcoastproperties.com">Email</a>
            <a class="cta-button" href="tel:+34624867866">Call</a>
        </div>
    </aside>

    <main class="site-main">
        <section class="page-section active">
            <div class="page-hero">
                <h1>Your Account</h1>
                <p>Sign in to sync favourites across devices and unlock partner tools.</p>
            </div>

	            <div class="glass panel auth-status" id="auth-status" aria-live="polite" style="display:none"></div>
	            <div class="auth-actions" id="auth-actions">
	                <button id="clear-offline-cache-auth" class="cta-button cta-button--outline" type="button">Clear offline cache</button>
	                <button id="reset-auth-storage" class="cta-button cta-button--outline" type="button">Reset login</button>
	            </div>

	            <div class="page-grid" id="auth-panels">
	                <div class="glass panel">
	                    <h2>Sign in</h2>
	                    <form id="sign-in-form" class="form-grid">
	                        <label>
                            <span>Email</span>
                            <input id="sign-in-email" name="email" type="email" autocomplete="username" inputmode="email" autocapitalize="none" spellcheck="false" required placeholder="you@email.com">
                        </label>
                        <label>
                            <span>Password</span>
                            <input id="sign-in-password" name="password" type="password" autocomplete="current-password" placeholder="Your password">
	                        </label>
	                        <button class="cta-button" type="submit">Sign in</button>
	                    </form>

	                    <div class="divider"></div>

	                    <h3>Reset your password</h3>
	                    <form id="reset-password-form" class="form-grid">
	                        <label>
	                            <span>Email</span>
	                            <input id="reset-email" name="email" type="email" autocomplete="username" inputmode="email"
	                                autocapitalize="none" spellcheck="false" required placeholder="you@email.com">
	                        </label>
	                        <button class="cta-button cta-button--outline" type="submit">Send reset link</button>
	                    </form>
	                    <p class="muted">We will email you a secure link to choose a new password.</p>

	                    <div class="divider"></div>

	                    <h3>Or sign in with a magic link</h3>
	                    <form id="magic-link-form" class="form-grid">
	                        <label>
	                            <span>Email</span>
                            <input id="magic-email" name="email" type="email" autocomplete="username" inputmode="email" autocapitalize="none" spellcheck="false" required placeholder="you@email.com">
                        </label>
                        <button class="cta-button" type="submit">Send magic link</button>
                    </form>
	                    <p class="muted">Check your inbox and click the link to sign in.</p>
	                </div>

	                <div class="glass panel">
                    <h2>Create account</h2>
                    <form id="sign-up-form" class="form-grid">
                        <label>
                            <span>Email</span>
                            <input id="sign-up-email" name="email" type="email" autocomplete="username" inputmode="email" autocapitalize="none" spellcheck="false" required placeholder="you@email.com">
                        </label>
                        <label>
                            <span>Password</span>
                            <input id="sign-up-password" name="password" type="password" autocomplete="new-password" required minlength="8"
                                placeholder="Minimum 8 characters">
                        </label>
                        <button class="cta-button" type="submit">Create account</button>
                    </form>
	                    <p class="muted">We use your email only for login and service updates you request.</p>
	                </div>
	            </div>

	            <div class="glass panel auth-recovery" id="password-recovery-panel" style="display:none">
	                <h2>Set a new password</h2>
	                <p class="muted">Choose a strong password (minimum 8 characters). You will stay signed in after updating.</p>
	                <form id="password-recovery-form" class="form-grid">
	                    <label>
	                        <span>New password</span>
	                        <input id="recovery-password" name="password" type="password" autocomplete="new-password" required minlength="8"
	                            placeholder="Minimum 8 characters">
	                    </label>
	                    <label>
	                        <span>Confirm new password</span>
	                        <input id="recovery-password2" name="password2" type="password" autocomplete="new-password" required minlength="8"
	                            placeholder="Repeat the password">
	                    </label>
	                    <div class="form-actions">
	                        <button class="cta-button" type="submit">Update password</button>
	                        <button class="cta-button cta-button--outline" id="recovery-cancel" type="button">Cancel</button>
	                    </div>
	                </form>
	            </div>

	            <div class="account-dashboard" id="dashboard-panels" style="display:none">
	                <div class="glass panel account-welcome" id="account-status" aria-live="polite">
	                    <div class="account-welcome-top">
	                        <div>
                            <div class="status-title">Dashboard</div>
                            <div class="status-text" id="status-text">Connecting…</div>
                            <div class="muted" id="status-hint"></div>
                        </div>
                        <div class="account-welcome-actions">
                            <div class="account-badges">
                                <span class="role-badge" id="dash-role">Client</span>
                            </div>
                            <div class="status-actions">
                                <a class="cta-button cta-button--outline" href="properties.html">Browse</a>
                                <a class="cta-button cta-button--outline" href="properties.html?saved=1">Saved</a>
                                <button id="sign-out-btn" class="cta-button cta-button--outline" type="button" disabled>Sign out</button>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top:0.8rem; display:flex; gap:0.6rem; flex-wrap:wrap;">
                        <button id="clear-offline-cache" class="cta-button cta-button--outline" type="button">Clear offline cache</button>
                    </div>
                </div>

                <div class="account-tiles" aria-label="Account shortcuts">
                    <a class="glass panel account-tile" href="properties.html?saved=1">
                        <div class="account-tile-k">Saved listings</div>
                        <div class="account-tile-v"><span id="dash-saved-count">0</span> saved</div>
                        <div class="muted">Open your shortlist and share it instantly.</div>
                    </a>
                    <a class="glass panel account-tile" href="properties.html">
                        <div class="account-tile-k">Browse</div>
                        <div class="account-tile-v">Find your next place</div>
                        <div class="muted">Fast filters, accurate map, and shareable refs.</div>
                    </a>
                    <a class="glass panel account-tile" href="admin-favourites.html" id="dash-admin-tile" style="display:none">
                        <div class="account-tile-k">Admin</div>
                        <div class="account-tile-v">Favourites inbox</div>
                        <div class="muted">See saved listings from all users (admin only).</div>
                    </a>
                    <a class="glass panel account-tile" href="admin-crm.html" id="dash-crm-tile" style="display:none">
                        <div class="account-tile-k">Admin</div>
                        <div class="account-tile-v">Leads & contacts</div>
                        <div class="muted">Private CRM data (admin only).</div>
                    </a>
                    <a class="glass panel account-tile" href="collaborate.html" id="dash-partner-tile">
                        <div class="account-tile-k" id="dash-partner-k">Partner tools</div>
                        <div class="account-tile-v" id="dash-partner-v">White-label & collaboration</div>
                        <div class="muted" id="dash-partner-desc">For agencies, agents, developers and partners.</div>
                    </a>
                </div>

                <div class="glass panel account-admin" id="admin-panel" style="display:none">
                    <div class="account-admin-head">
                        <div>
                            <h2 style="margin:0;">Admin Dashboard</h2>
                            <div class="muted">Manage favourites inbox, roles, and collaborators.</div>
                        </div>
                        <div class="account-admin-actions">
                            <a class="cta-button" href="admin-favourites.html">Favourites Inbox</a>
                            <a class="cta-button cta-button--outline" href="admin-crm.html">CRM</a>
                        </div>
                    </div>

                    <div class="divider"></div>

                    <h3 style="margin:0;">User roles</h3>
                    <div class="muted" style="margin-top:0.35rem;">Users create their own account first. Then assign a role here.</div>
                    <div class="account-admin-users">
                        <div class="account-admin-users-bar">
                            <input id="admin-user-q" class="admin-input" type="text" placeholder="Search by email or display name (e.g. john@agency.com)">
                            <button id="admin-user-refresh" class="cta-button cta-button--outline" type="button">Search</button>
                        </div>
                        <div id="admin-user-status" class="muted" style="margin-top:0.5rem;"></div>
                        <div id="admin-user-list" class="account-admin-users-list"></div>
                    </div>
                </div>
            </div>

            <div class="glass panel" id="diagnostics" style="display:none">
                <h2>Diagnostics</h2>
                <p class="muted">Open this page with <code>?qa=1</code> to see setup checks.</p>
                <div id="diag-lines" class="diag-lines"></div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="footer-inner">
            <div class="footer-col">
                <h3>Spanish Coast Properties</h3>
                <p>Account access for favourites sync and partner collaboration tools.</p>
            </div>
            <div class="footer-col">
                <h4>Explore</h4>
                <ul class="footer-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="properties.html">Properties</a></li>
                    <li><a href="businesses.html">Businesses</a></li>
                    <li><a href="vehicles.html">Vehicles</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="account.html">Account</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Contact</h4>
                <ul class="footer-links">
                    <li><a href="tel:+34624867866">+34 624 867 866</a></li>
                    <li><a href="mailto:info@spanishcoastproperties.com">info@spanishcoastproperties.com</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">© <span id="footer-year">2026</span> Spanish Coast Properties.</div>
    </footer>

    <script defer src="account.js?v=20260210u"></script>
    <script defer src="site.js?v=20260210u"></script>
</body>

</html>
